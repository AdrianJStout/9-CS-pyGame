<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Pygame</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu' rel='stylesheet' type='text/css'>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="js/navbar.js" type="text/javascript"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Pygame</h1>
  <div class="github-fork-ribbon-wrapper left">
    <div class="github-fork-ribbon">
      <a href="https://github.com/stsb11/9-CS-pyGame">Fork me on GitHub</a>
    </div>
  </div>
<div id="stickyribbon">
    <ul>
      <li><a href="1_Lesson.html">Week1</a></li>
      <li><a href="2_Lesson.html">Week2</a></li>
      <li><a href="3_Lesson.html">Week3</a></li>
      <li><a href="4_Lesson.html">Week4</a></li>
      <li><a href="5_Lesson.html">Week5</a></li>
      <li><a href="assessment.html">Assessment</a></li>
    </ul>
  </div>
<div id="outline-container-sec-1" class="outline-2 activity">
<h2 id="sec-1">Keyboard events</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-sec-1-1" class="outline-3 code">
<h3 id="sec-1-1">Download It</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Start by picking up a template to use in this lesson: 
</li>
<li><a href="./doc/pygameDevTemplate.py">Right click and save as - for a fresh template</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3 learn">
<h3 id="sec-1-2">Learn It</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>As we are making a game for the PC platform, the keyboard is a very important input tool.
</li>
<li>We are going to control the moment of a player on the screen with the arrow keys. Add these lines of code inside the game loop, inside your <code>for</code> loop. 
</li>
<li>Put the code immediately underneath the gameState = "exit" line.
</li>
<li><b>Note:</b> As always, you'll need to ensure the code is indented for it to work.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #859900; font-weight: bold;">if</span> event.<span style="color: #657b83; font-weight: bold;">type</span> == pygame.KEYDOWN:
    <span style="color: #859900; font-weight: bold;">if</span> event.key == pygame.K_LEFT:
        <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"Left"</span>)
    <span style="color: #859900; font-weight: bold;">if</span> event.key == pygame.K_RIGHT:
        <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"Right"</span>)
</pre>
</div>
<ul class="org-ul">
<li>If you run this code and look in the interpreter window, you'll be able to see the program letting you know when you press left and right. You might be able to add up and down for yourself too.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3 learn">
<h3 id="sec-1-3">Learn It</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Let's now get the shape moving around on the screen when left/right keys are pressed. 
</li>
<li>Our pseudocode for this will be&#x2026;
</li>
</ul>
<pre class="example">
Set up variables: XPos=100 and YPos=100 for the player's position.

BEGIN LOOP
    IF player presses the left arrow THEN
        player1XPos = player1XPos - 5
    ELSE IF player presses the right arrow THEN
        player1XPos = player1XPos + 5
    END IF

    Re-draw the sprite at player1XPos, player1YPos.
END LOOP
</pre>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3 try">
<h3 id="sec-1-4">Try It</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>We'll start by adding our variables. 
</li>
<li>Add these lines of code directly below the gameState="running" line.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #268bd2;">player1XPos</span> = 100
<span style="color: #268bd2;">player1YPos</span> = 100
</pre>
</div>
<ul class="org-ul">
<li>We then create event listeners in the game loop. 
</li>
<li>To do this, change the lines that say <code>print("left")</code> and <code>print("right")</code> to say&#x2026;
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #859900; font-weight: bold;">if</span> event.<span style="color: #657b83; font-weight: bold;">type</span> == pygame.KEYDOWN:
    <span style="color: #859900; font-weight: bold;">if</span> event.key == pygame.K_LEFT:
        <span style="color: #268bd2;">player1XPos</span> -= 5
    <span style="color: #859900; font-weight: bold;">elif</span> event.key == pygame.K_RIGHT:
        <span style="color: #268bd2;">player1XPos</span> += 5
</pre>
</div>

<ul class="org-ul">
<li>Run the program. You will find the player moves each time the key is pressed. 
</li>
<li>This is good for some games but other times it is desirable to keep the player moving until another key is pressed (like in snake-type games). Currently the Event Listener and the Event Handler are in the same block of code.
</li>
<li>We will separate the two out for continous movement
</li>
<li>We will need 2 new variables outside of the game loop to hold the player's speed and direction. 
</li>
<li>The pseudocode for our new movement program is:
</li>
</ul>
<pre class="example">
Set up variables:
   player1Direction = "nothing"
   player1Speed = 5
   player1XPos = 100
   player1YPos = 100

BEGIN LOOP
    Has the player used the mouse or keyboard?
       YES: Has the player pushed the left arrow?
               YES: player1Direction is left
            Has the player pushed the right arrow?
               YES: player1Direction is right

    Is the player1Direction left?
        YES: Decrease the player1XPos variable by 5.
    Is the player1Direction right?
        YES: Increase the player1XPos variable by 5.

    Clear the screen, and draw the player1 shape at player1XPos, player1YPos. 
END LOOP
</pre>

<ul class="org-ul">
<li>Let's implement this in code. 
</li>
<li>Add these variables underneath the <b>player1YPos = 100</b> line:
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #268bd2;">player1Direction</span> = <span style="color: #2aa198;">"nothing"</span>
<span style="color: #268bd2;">player1Speed</span> = 5
</pre>
</div>
<ul class="org-ul">
<li>Next, we'll change the game loop to modify the event listener and all and event handler.
</li>
<li>Replace your game loop code with this code. Ensure you keep all the indents where they should be. You may find you need to tweak the indents with the tab key once you've pasted the code. 
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #859900; font-weight: bold;">while</span> gameState != <span style="color: #2aa198;">"exit"</span>:  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">game loop - note: everything in the mainloop is indented one tab</span>
    <span style="color: #859900; font-weight: bold;">for</span> event <span style="color: #859900; font-weight: bold;">in</span> pygame.event.get():  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">get user interaction events</span>
        <span style="color: #859900; font-weight: bold;">if</span> event.<span style="color: #657b83; font-weight: bold;">type</span> == pygame.QUIT:  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">tests if window's X (close) has been clicked</span>
            <span style="color: #268bd2;">gameState</span> = <span style="color: #2aa198;">"exit"</span>  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">causes exit of game loop</span>
        <span style="color: #859900; font-weight: bold;">if</span> event.<span style="color: #657b83; font-weight: bold;">type</span> == pygame.KEYDOWN:
            <span style="color: #859900; font-weight: bold;">if</span> event.key == pygame.K_LEFT:
                <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">player1XPos -= 5</span>
                <span style="color: #268bd2;">player1Direction</span> = <span style="color: #2aa198;">"left"</span>
            <span style="color: #859900; font-weight: bold;">elif</span> event.key == pygame.K_RIGHT:
                <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">player1XPos += 5</span>
                <span style="color: #268bd2;">player1Direction</span> = <span style="color: #2aa198;">"right"</span>

    <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">Player 1 Event handler code now...</span>
    <span style="color: #859900; font-weight: bold;">if</span> player1Direction == <span style="color: #2aa198;">"left"</span>:
        <span style="color: #268bd2;">player1XPos</span> -= player1Speed
    <span style="color: #859900; font-weight: bold;">elif</span> player1Direction == <span style="color: #2aa198;">"right"</span>:
        <span style="color: #268bd2;">player1XPos</span> += player1Speed

    screen.fill(black)
    <span style="color: #268bd2;">player1</span> = pygame.draw.rect(screen, green, (player1XPos, player1YPos, 20, 20))
</pre>
</div>
<ul class="org-ul">
<li>Run the program with <code>Shift-F10</code>, and steer the square with the left/right cursor keys. 
</li>
<li>What's different between this code and the previous version?
</li>
<li>Comment the lines of code to explain what they do. 
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3 badge">
<h3 id="sec-1-5">Badge It</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li><b>Silver:</b> Add the ability to move <code>player1</code> up and down <b>or</b> add comments to your code to explain how it works.
</li>
<li><b>Gold:</b> Add the functionality to increase and decrease <code>player1Speed</code> with the <b>Q</b> and <b>W</b> keys.
</li>
<li><b>Platinum</b>: Add a feature to make <code>player1</code> visible/invisible when the space bar is pressed, <b>or</b> stop the square from travelling beyond the edge of the window. 
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
